 #include<iostream>
 #include<math.h>
 using namespace std;
 int main()
{
 int n,m,p,q,i,j,x=0,y=0,a[60],b[60],c[60],d[60],oyes=1000000,yes=1000000,min1=1000000,min2=1000000;
 char mas[60][60],arr[200][200],flag=0,k=0;
 cin>>n>>m;
 for(i=0;i<n;i++)
     for(j=0;j<m;j++)
         cin>>mas[i][j];
 p=3*n;
 q=3*m;        
 for(i=0;i<p;i++)
    {
     if(x>=n)x=0; 
     for(j=0;j<q;j++)
        { 
         arr[i][j]=mas[x][y];
         if(y>=n)y=-1;
         y++;
        }   
     x++;     
    }        
 for(i=0;i<p;i++)
     for(j=0;j<q;j++) 
         if(arr[i][j]=='P')
           {
            a[k]=i;
            b[k]=j;
            k++;
           }
 for(i=0;i<k;i++)
    { 
     yes=abs(n-a[i])+abs(m-b[i]);
     if(yes<min1)
       {
        min1=yes;
        x=a[i];
        y=b[i];
       }  
    }
 k=0; 
 for(i=0;i<p;i++)
     for(j=0;j<q;j++) 
         if(arr[i][j]=='X')
           {
            c[k]=i;
            d[k]=j;
            k++;
           }
 for(i=0;i<k;i++)
    { 
     oyes=abs(x-c[i])+abs(y-d[i]);
     if(oyes<min2)min2=oyes;
    }              
 cout<<min1+min2<<"\n";                        
 return 0;
}  
